!function(n){var e={};function t(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return n[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=n,t.c=e,t.d=function(n,e,a){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:a})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(a,i,function(e){return n[e]}.bind(null,i));return a},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="/",t(t.s=0)}([function(n,e,t){t(1),n.exports=t(2)},function(n,e){var t;(t=jQuery)((function(){var n=t(".etgpg");$userInputs=t("<div/>"),$userInputs.html('\n    <div class="etgpg__field">\n      <label for="etgpg__salary">Salary</label>\n      <div class="etgpg__input"><input id="etgpg__salary" name="salary" type="text" /><span class="etgpg__salary_msg"></span></div>\n    </div>\n\n    <div class="etgpg__field">\n      <label for="etgpg__bonus">Bonus (optional)</label>\n      <div class="etgpg__input"><input id="etgpg__bonus" name="bonus" type="text" /><span class="etgpg__bonus_msg"></span></div>\n    </div>\n\n    <div class="etgpg__field etgpg__field--company">\n      <label for="etgpg__company">Company</label>\n      <div class="etgpg__input">\n        <input id="etgpg__company" name="company" />\n        <div class="etgpg__hints"></div>\n      </div>\n    </div>\n\n    <button class="etgpg__btn-calc">Calculate</button>\n\n    <div class="etgpg__smallprint">\n      We are collecting anonymous salary data for campaigning and research\n      purposes. We are only storing aggregate totals, not each submission, so\n      we will not able to withdraw your submission. If you have any queries\n      about how we collect and store data, please contact <a href="mailto:jo.wittams@equalitytrust.org.uk">Jo Wittams</a>, Finance and\n      Operations Manager.\n    </div>\n\n  ');var e=$userInputs.find("button").prop("disabled",!0).on("click",(function(){a.css("min-height",$userInputs.height()+"px").show(),$userInputs.hide(),t.ajax({url:"/etgenderpaygap/submit",dataType:"json",method:"POST",type:"POST",data:{company:r.id,salary:o.val(),bonus:s.val()}}).then((function(n){console.log(n),a.empty(),a.append((n.paygap_salary>0?"Based on the gender pay gap at <span>".concat(n.company,"</span>, the lifetime earnings loss for women at your pay is estimated to be*"):"<span>".concat(n.company,"</span> has a gender pay gap which favours women. However, nationally, the average lifetime earnings loss for women at your pay is estimated to be*"))+'<div class="etgpg__loss">'.concat(n.lifetimeLoss,'</div>\n        <div class="etgpg__date-intro">The date in the year when women ')+(n.paygap_salary>0?"working at ".concat(n.company," "):"in the UK ")+'effectively cease to be paid is</div>\n        <div class="etgpg__date">'.concat(n.last_paid_day,'</div>\n\n        <div class="etgpg__petition-ask">If you think it\'s about time for\n          equal pay, sign up to be notified of our campaign to win equal pay and\n          find out what you can do to challenge pay inequality in the UK.\n          <div class="etgpg__centre"><a href="https://www.equalitytrust.org.uk/demand-end-pay-inequality" class="etgpg__button">Sign up now</a></div>\n        </div>\n        <div class="etgpg__total-stats">A total lifetime loss of\n        ').concat(n.lifetimeLossTotal," has been calculated from ").concat(n.count,' people using\n        this tool.</div>\n        <div class="etgpg__smallprint">').concat(n.data_src,"</div>"))})).fail((function(n,e,t){$userInputs.show(),a.hide(),alert("Sorry, something went wrong, please try again.")}))}));n.append($userInputs);var a=t('<div class="etgpg__result">Loading...</div>').hide();n.append(a);var i=n.find('input[name="company"]'),o=n.find('input[name="salary"]').on("input",(function(n){g=!0,_()})),s=n.find('input[name="bonus"]').on("input",(function(n){f=!0,_()})),l=n.find(".etgpg__hints"),p=-1,r=!1,d=[],u=0,c=!1,g=!1,f=!1;function y(n,e){if(""!==(n=n.replace(/^\s*(.*?)\s*$/,"$1"))||!e)return!!(n=n.replace(/[Â£,]/g,"")).match(/^[1-9]\d\d\d+$/)&&parseInt(n)}function _(t){valid=!0,valid&=(valid=!0,!1!==y(o.val())?n.find(".etgpg__salary_msg").empty():(valid=!1,g&&n.find(".etgpg__salary_msg").text("Enter gross salary like 20000")),valid),valid&=(valid=!0,!1!==y(s.val(),!0)?n.find(".etgpg__bonus_msg").empty():(valid=!1,f&&n.find(".etgpg__bonus_msg").text("Enter gross bonus like 20000")),valid),valid&=!!r,e.prop("disabled",!valid)}function m(){console.log("selectCompany",p,d[p]),i.val(d[p].name),r=d[p],l.hide(),_()}function v(){l.find("li.highlighted").removeClass("highlighted"),p>-1&&l.find("li").eq(p).addClass("highlighted")}function h(){t.getJSON("/etgenderpaygap/matches",{company:i.val()}).done((function(n){console.log("matches",n),d=n.matches,u=n.count,function(){0===u&&(d=[{name:"(Other UK company, use average)",id:0}]);var n=t("<ul/>");d.forEach((function(e,a){var i=t("<li/>").text(e.name);i.on("click",(function(n){console.log("hintIndex set to ",a),p=a,v(),m()})),n.append(i)})),p=0,l.empty().append(n),l.fadeIn("fast"),v()}()})).fail((function(n,e,t){var a=e+", "+t;console.log("Request Failed: "+a)}))}i.on("keyup",(function(n){13==n.keyCode?p<0||m():38==n.keyCode?(--p<0&&(p=d.length-1),v()):40==n.keyCode?(++p>=d.length&&p--,v()):(c&&(window.clearTimeout(c),c=!1),i.val().replace(/^\s*(.*?)\s*$/,"$1")?c=window.setTimeout(h,150):(d=[],p=-1,v()))})).on("blur",(function(n){return l.fadeOut("fast")}))}))},function(n,e){}]);